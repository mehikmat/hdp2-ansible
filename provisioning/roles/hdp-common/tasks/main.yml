## 
# File: roles/hdp_common/tasks/main.yml
# Installs the base hadoop packages
# Author: Hikmat Dhamee
##

---
- name: Install the base hadoop components
  yum: name={{ item }} state=installed
  with_items:
   - hadoop
   - hadoop-hdfs
   - hadoop-libhdfs
   - hadoop-yarn
   - hadoop-mapreduce
   - hadoop-client
   - openssl
   - snappy
   - snappy-devel
   - lzo
   - lzo-devel
   - hadoop-lzo
   - hadoop-lzo-native
  sudo: yes

- name: Create the hosts file for all machines
  template: src=etc/hosts.j2 dest=/etc/hosts

- name: Create the iptables file for all machines
  template: src=iptables.j2 dest=/etc/sysconfig/iptables
  #notify: restart iptables